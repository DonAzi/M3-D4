<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css"
      integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn"
      crossorigin="anonymous"
    />
    <style>
      body {
        overflow: hidden;
      }
    </style>

    <title>Shopping Card Expo</title>
  </head>
  <body>
    <nav class="navbar navbar-dark bg-dark">
      <a class="navbar-brand text-success font-italic font-weight-bolder"
        >Shoppoholic</a
      >
      <form class="form-inline">
        <input
          class="form-control mr-sm-2"
          type="search"
          placeholder="Search"
          aria-label="Search"
        />
        <button class="btn btn-outline-success my-2 my-sm-0" type="submit">
          Search
        </button>
      </form>
    </nav>
    <div class="container-fluid">
      <div class="row">
        <div
          id="for-ten"
          class="
            col-9
            d-flex
            justify-content-around
            align-center
            bg-success
            pt-5
          "
        ></div>
        <div id="for-two" class="col-3 bg-warning pt-5">
          <h5 class="text-center font-italic">Your basket</h5>
          <ol id="basketList" class="d-flex">
            <!-- <li></li> -->
          </ol>
        </div>
      </div>
    </div>

    <!-- Optional JavaScript; choose one of the two! -->
    <script>
      const queryResults = bookArray.filter((book) => {
        book.title.includes(input);
      });
      let bookArray; //declare outsite of the function for global use then assign inside function
      const bringThemHere = () => {
        fetch("https:striveschool-api.herokuapp.com/books")
          .then((result) => result.json())
          .then((data) => {
            console.log(data);
            bookArray = data;
            const row = document.getElementById("for-ten");
            //
            data.forEach((book) => {
              const col = `
        <div class="col-3">
            <div class="card" >
            <img src=${book.img} class="card-img-top img-fluid w-100 h-100" style="object-fit: cover" alt="#">
                <div class="card-body">
                    <h5 class="card-title">${book.title}</h5>
                    <p>£${book.price}</p>
                    <p>${book.category}</p>
                    <button id=${book.asin} onclick="addBookToBasket(event)" class="btn btn-primary w-100">Add to Card</button>
                    <button onclick="removeCard(event)" class="btn btn-danger w-100">Skip >></button>
                </div> </div> </div>
                `;
              row.innerHTML += col;
              //   const col = document.createElement("div");
              //   col.classList.add("col-12", "col-md-4", "d-flex", "my-3");
              //   const img = document.createElement("img");
              //   img.src = book.img;
              //   img.classList.add("img-fluid", "h-100", "w-100");
              //   img.style.objectFit = "cover";
              //   col.appendChild(img);
              //   row.appendChild(col);
            });
          });
      };
      const removeCard = (event) => {
        event.target.parentElement.parentElement.parentElement.parentElement.remove(); //need help here +++ when i skip, i
        //need 3 parentElement but
        // when i remove from basket i need 4 parenElement, please advice me thanks&regards
        alert("Naughty Naughty");
      };
      //const queryResults = bookArray.filter((book)=> {
      // book.title.includes()
      //})
      //   const secondFilter = queryResults.filter() used anywhere u want to use

      //.contains //and this is for ints when filtering
      //.includes //< this is for strings

      const addBookToBasket = (event) => {
        const filteredBookArray = bookArray.filter(
          (book) => book.asin === event.currentTarget.id
        );
        // .filter function goes through an array and returns a new array with the "true" elements
        filteredBookArray.map((book) => {
          const ol = document.getElementById("basketList");
          const li = document.createElement("li");
          li.innerHTML = `<div class="col">
            <div class="card" >
            <img src=${book.img} class="card-img-top" alt="#">
                <div class="card-body">

                    <p>£${book.price}</p>
                    <p>${book.category}</p>
                    <button onclick="removeCard(event)" class="btn btn-danger w-100">Remove</button>
                </div> </div> </div>`;
          ol.appendChild(li);
        });
      };

      //   .catch((err) => {
      //       console.log(err)
      //   });

      window.onload = () => {
        alert("Do not Skip Cards");
        alert("Promise ?");

        bringThemHere();
      };
    </script>

    <!-- Option 1: jQuery and Bootstrap Bundle (includes Popper) -->
    <script
      src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
      integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF"
      crossorigin="anonymous"
    ></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js" integrity="sha384-VHvPCCyXqtD5DqJeNxl2dtTyhF78xXNXdkwX1CZeRusQfRKp+tA7hAShOK/B/fQ2" crossorigin="anonymous"></script>
    -->
  </body>
</html>
